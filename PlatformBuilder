--[[ Builds a flat platform and place a torch every 5th block ]]
local sizeX
local sizeY
local selectedItemSlot = 1
local tArgs = { ... }

local function placeTorch()
  if turtle.getItemCount(16) > 1 then
    turtle.up()
    turtle.back()
    turtle.select(16)
    turtle.placeDown()
    turtle.forward()
    turtle.down()
    return true;
  else
    return false;
  end
end

local function placeBlock()
  if turtle.getItemCount(selectedItemSlot) > 1 then
    turtle.placeDown()
    return true
  else
    if (selectedItemSlot < 14) then
      selectedItemSlot = selectedItemSlot + 1
      return placeBlock()
    else
      return false
    end
  end
end

local function buildRow( torchRow )
  for x = 1, sizeX do
    if not placeBlock() then
      break
    end
    if torchRow then
      if x%5 == 0 then
        if not placeTorch() then
          break;
        end
      end
    end
    turtle.forward()
  end
end

local function build()
  for y = 1, sizeY do
    buildRow(y == 1 or y%5 == 0) 
  end
end

--[[ Processing arguments ]]
if tArgs[1] then sizeX = tArgs[1] end
if tArgs[2] then sizeY = tArgs[2] else sizeY = sizeX end

build()

